var Mailjs=function(){"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=t(fetch);return class{constructor(){this.baseUrl="https://api.mail.tm",this.token="",this.id="",this.address=""}register(t,e){return this.send_("/accounts","POST",{address:t,password:e})}async login(t,e){e=await this.send_("/token","POST",{address:t,password:e});return e.status&&(this.token=e.data.token,this.id=e.data.id,this.address=t),e}me(){return this.send_("/me")}getAccount(t){return this.send_("/accounts/"+t)}deleteAccount(t){return this.send_("/accounts/"+t,"DELETE")}deleteMe(){return this.deleteAccount(this.id)}getDomains(){return this.send_("/domains?page=1")}getDomain(t){return this.send_("/domains/"+t)}getMessages(t=1){return this.send_("/messages?page="+t)}getMessage(t){return this.send_("/messages/"+t)}deleteMessage(t){return this.send_("/messages/"+t,"DELETE")}setMessageSeen(t,e=!0){return this.send_("/messages/"+t,"PATCH",{seen:e})}getSource(t){return this.send_("/sources/"+t)}async createOneAccount(){let t=await this.getDomains();if(!t.status)return t;t=t.data[0].domain;var e=this.makeHash_(5)+"@"+t,s=this.makeHash_(8);let a=await this.register(e,s);if(!a.status)return a;a=a.data;let n=await this.login(e,s);return n.status?(n=n.data,{status:!0,data:{username:e,password:s}}):n}makeHash_(t){return Array.from({length:t},()=>{var t="abcdefghijklmnopqrstuvwxyz0123456789";return t.charAt(Math.floor(Math.random()*t.length))}).join("")}async send_(t,e="GET",s){const a={method:e,headers:{accept:"application/json",authorization:"Bearer "+this.token}};if("POST"===e||"PATCH"===e){const i="PATCH"===e?"merge-patch+json":"json";a.headers["content-type"]="application/"+i,a.body=JSON.stringify(s)}const n=await o.default(this.baseUrl+t,a);let r;const i=n.headers.get("content-type");return r=null!==i&&void 0!==i&&i.startsWith("application/json")?await n.json():await n.text(),{status:n.ok,message:n.ok?"ok":r.message||r.detail,data:r}}}}();
