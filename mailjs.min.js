var Mailjs=function(i){"use strict";return class{constructor(){this.baseUrl="https://api.mail.tm",this.token="",this.id="",this.address=""}register(t,s){return this.send_("/accounts","POST",{address:t,password:s})}async login(t,s){s=await this.send_("/token","POST",{address:t,password:s});return s.status&&(this.token=s.data.token,this.id=s.data.id,this.address=t),s}async loginWithToken(t){this.token=t;t=await this.me();if(t.status)return this.id=t.data.id,this.address=t.data.address,t;throw new Error(t.message)}me(){return this.send_("/me")}getAccount(t){return this.send_("/accounts/"+t)}deleteAccount(t){return this.send_("/accounts/"+t,"DELETE")}deleteMe(){return this.deleteAccount(this.id)}getDomains(){return this.send_("/domains?page=1")}getDomain(t){return this.send_("/domains/"+t)}getMessages(t=1){return this.send_("/messages?page="+t)}getMessage(t){return this.send_("/messages/"+t)}deleteMessage(t){return this.send_("/messages/"+t,"DELETE")}setMessageSeen(t,s=!0){return this.send_("/messages/"+t,"PATCH",{seen:s})}getSource(t){return this.send_("/sources/"+t)}async createOneAccount(){let t=await this.getDomains();if(!t.status)return t;t=t.data[0].domain;var s,e,a=this.makeHash_(5)+"@"+t,n=this.makeHash_(8);return(s=await this.register(a,n)).status?(s=s.data,(e=await this.login(a,n)).status?(e=e.data,{status:!0,data:{username:a,password:n}}):e):s}makeHash_(t){return Array.from({length:t},()=>{return(t="abcdefghijklmnopqrstuvwxyz0123456789").charAt(Math.floor(Math.random()*t.length));var t}).join("")}async send_(t,s="GET",e){var a={method:s,headers:{accept:"application/json",authorization:"Bearer "+this.token}};if("POST"===s||"PATCH"===s){const r="PATCH"===s?"merge-patch+json":"json";a.headers["content-type"]="application/"+r,a.body=JSON.stringify(e)}s=await i(this.baseUrl+t,a);let n;const r=s.headers.get("content-type");return n=null!==r&&void 0!==r&&r.startsWith("application/json")?await s.json():await s.text(),{status:s.ok,message:s.ok?"ok":n.message||n.detail,data:n}}}}(fetch);
